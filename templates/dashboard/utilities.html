<script type="text/babel">
    // --- Shared Utilities & Components ---

    // --- SVG Icons ---
    const SVGIcon = ({ size = 18, className = "", children }) => (React.createElement("svg", { className, xmlns: "http://www.w3.org/2000/svg", width: size, height: size, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, children));
    const ChevronDown = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "6 9 12 15 18 9" }));
    const ChevronUp = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "18 15 12 9 6 15" }));
    const ChevronLeft = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "15 18 9 12 15 6" }));
    const ChevronRight = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "9 18 15 12 9 6" }));
    const Edit3 = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M12 20h9" }), React.createElement("path", { d: "M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" }));
    const Zap = (props) => React.createElement(SVGIcon, props, React.createElement("polygon", { points: "13 2 3 14 12 14 11 22 21 10 12 10 13 2" }));
    const CheckCircle = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M22 11.08V12a10 10 0 1 1-5.93-9.14" }), React.createElement("polyline", { points: "22 4 12 14.01 9 11.01" }));
    const MessageSquareIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" }));
    const PlusCircle = (props) => React.createElement(SVGIcon, props, React.createElement("circle", { cx: "12", cy: "12", r: "10" }), React.createElement("line", { x1: "12", y1: "8", x2: "12", y2: "16" }), React.createElement("line", { x1: "8", y1: "12", x2: "16", y2: "12" }));
    const Save = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" }), React.createElement("polyline", { points: "17 21 17 13 7 13 7 21" }), React.createElement("polyline", { points: "7 3 7 8 15 8" }));
    const UploadCloud = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "16 16 12 12 8 16" }), React.createElement("line", { x1: "12", y1: "12", x2: "12", y2: "21" }), React.createElement("path", { d: "M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3" }), React.createElement("polyline", { points: "16 16 12 12 8 16" }));
    const DownloadCloud = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "8 17 12 21 16 17" }), React.createElement("line", { x1: "12", y1: "12", x2: "12", y2: "21" }), React.createElement("path", { d: "M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3" }));
    const AlertTriangle = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" }), React.createElement("line", { x1: "12", y1: "9", x2: "12", y2: "13" }), React.createElement("line", { x1: "12", y1: "17", x2: "12.01", y2: "17" }));
    const FileText = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }), React.createElement("polyline", { points: "14 2 14 8 20 8" }), React.createElement("line", { x1: "16", y1: "13", x2: "8", y2: "13" }), React.createElement("line", { x1: "16", y1: "17", x2: "8", y2: "17" }), React.createElement("polyline", { points: "10 9 9 9 8 9" }));
    const Image = (props) => React.createElement(SVGIcon, props, React.createElement("rect", { x: "3", y: "3", width: "18", height: "18", rx: "2", ry: "2" }), React.createElement("circle", { cx: "8.5", cy: "8.5", r: "1.5" }), React.createElement("polyline", { points: "21 15 16 10 5 21" }));
    const LogOutIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" }), React.createElement("polyline", { points: "16 17 21 12 16 7" }), React.createElement("line", { x1: "21", y1: "12", x2: "9", y2: "12" }));
    const UserCheck = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }), React.createElement("circle", { cx: "8.5", cy: "7", r: "4" }), React.createElement("polyline", { points: "17 11 19 13 23 9" }));
    const SendIcon = (props) => React.createElement(SVGIcon, props, React.createElement("line", { x1: "22", y1: "2", x2: "11", y2: "13" }), React.createElement("polygon", { points: "22 2 15 22 11 13 2 9 22 2" }));
    const InfoIcon = (props) => React.createElement(SVGIcon, props, React.createElement("circle", { cx: "12", cy: "12", r: "10" }), React.createElement("line", { x1: "12", y1: "16", x2: "12", y2: "12" }), React.createElement("line", { x1: "12", y1: "8", x2: "12.01", y2: "8" }));
    const Trash2 = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "3 6 5 6 21 6" }), React.createElement("path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" }), React.createElement("line", { x1: "10", y1: "11", x2: "10", y2: "17" }), React.createElement("line", { x1: "14", y1: "11", x2: "14", y2: "17" }));
    const HistoryIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M1 4v6h6" }), React.createElement("path", { d: "M3.51 15a9 9 0 1 0 2.13-9.36L1 10" }));
    const MenuIcon = (props) => React.createElement(SVGIcon, props, React.createElement("line", { x1: "3", y1: "12", x2: "21", y2: "12" }), React.createElement("line", { x1: "3", y1: "6", x2: "21", y2: "6" }), React.createElement("line", { x1: "3", y1: "18", x2: "21", y2: "18" }));
    const BarChartIcon = (props) => React.createElement(SVGIcon, props, React.createElement("line", { x1: "12", x2: "12", y1: "20", y2: "10" }), React.createElement("line", { x1: "18", x2: "18", y1: "20", y2: "4" }), React.createElement("line", { x1: "6", x2: "6", y1: "20", y2: "16" }));
    const HomeIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }), React.createElement("polyline", { points: "9 22 9 12 15 12 15 22" }));
    const CornerDownRight = (props) => React.createElement(SVGIcon, props, React.createElement("polyline", { points: "15 10 20 15 15 20" }), React.createElement("path", { d: "M4 4v7a4 4 0 0 0 4 4h12" }));
    const LightbulbIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M15.06 9A7 7 0 0 1 9 15.06M9 15.06c-1.33-1.33-2.06-3.06-2.06-4.94A5 5 0 0 1 12 5a5 5 0 0 1 5 5c0 1.88-.73 3.61-2.06 4.94" }), React.createElement("path", { d: "M12 1a7 7 0 0 0-7 7c0 1.62.66 3.1 1.67 4.22" }), React.createElement("path", { d: "M8 22h8" }), React.createElement("path", { d: "M10 19v3" }), React.createElement("path", { d: "M14 19v3" }));
    const ChatIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" }));
    const CloudWeather = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z" }));
    const UserX = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }), React.createElement("circle", { cx: "8.5", cy: "7", r: "4" }), React.createElement("line", { x1: "18", y1: "8", x2: "23", y2: "13" }), React.createElement("line", { x1: "23", y1: "8", x2: "18", y2: "13" }));
    const UserCog = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" }), React.createElement("circle", { cx: "9", cy: "7", r: "4" }), React.createElement("circle", { cx: "19", cy: "11.5", r: "1.5" }), React.createElement("path", { d: "M19 8.25V10" }), React.createElement("path", { d: "M19 13v1.75" }), React.createElement("path", { d: "m21.56 9.44-1.25.72" }), React.createElement("path", { d: "m16.44 13.56-1.25.72" }), React.createElement("path", { d: "m21.56 13.56-1.25-.72" }), React.createElement("path", { d: "m16.44 9.44-1.25-.72" }));
    const EyeIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" }), React.createElement("circle", { cx: "12", cy: "12", r: "3" }));
    const EyeOffIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07l-1.07-1.07-1.07 1.07" }), React.createElement("line", { x1: "1", y1: "1", x2: "23", y2: "23" }));
    const ProjectIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" }));
    const PaperclipIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" }));
    const DownloadIcon = (props) => React.createElement(SVGIcon, props, React.createElement("path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }), React.createElement("polyline", { points: "7 10 12 15 17 10" }), React.createElement("line", { x1: "12", y1: "15", x2: "12", y2: "3" }));
    const X = (props) => React.createElement(SVGIcon, props, React.createElement("line", { x1: "18", y1: "6", x2: "6", y2: "18" }), React.createElement("line", { x1: "6", y1: "6", x2: "18", y2: "18" }));

    // Utility function to find a task by ID in nested task structure
    const findTaskById = (tasks, taskId) => {
        for (const task of tasks) {
            if (task.id === taskId) {
                return task;
            }
            if (task.subtasks && task.subtasks.length > 0) {
                const found = findTaskById(task.subtasks, taskId);
                if (found) return found;
            }
        }
        return null;
    };
    const LoadingSpinner = ({ message }) => React.createElement("div", { className: "text-center py-10 bg-white shadow rounded-lg" }, React.createElement("div", { className: "flex items-center justify-center" }, React.createElement("div", { className: "animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-sky-500" }), React.createElement("p", { className: "ml-4 text-lg text-slate-500" }, message || "Loading...")));
    const formatDateForDisplay = (dateStr) => { if (!dateStr) return 'N/A'; try { const date = new Date(dateStr + 'T00:00:00Z'); if (isNaN(date.getTime())) return 'Invalid Date'; return date.toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric', timeZone: 'UTC' }); } catch (e) { return 'Invalid Date'; } };
    const formatDateForExport = (dateStr) => dateStr || '';
    const formatDateForInput = (dateStr) => dateStr || '';

    const parseCSVDate = (dateStr) => {
        if (!dateStr) return null;
        let cleanedDateStr = String(dateStr).trim().replace(/^"|"$/g, '');
        if (cleanedDateStr.includes(' ')) {
            cleanedDateStr = cleanedDateStr.split(' ')[0];
        }
        const monthMap = { 'Jan': '01', 'Feb': '02', 'Mar': '03', 'Apr': '04', 'May': '05', 'Jun': '06', 'Jul': '07', 'Aug': '08', 'Sep': '09', 'Oct': '10', 'Nov': '11', 'Dec': '12' };
        const parts = cleanedDateStr.split(/[-/]/);
        if (parts.length === 3) {
            const p1 = parts[0], p2 = parts[1], p3 = parts[2];
            if (p1.length === 4 && p2.length === 2 && p3.length === 2) return cleanedDateStr;
            if (p1.length === 2 && p2.length === 2 && p3.length === 4) return `${p3}-${p2}-${p1}`;
            if (p1.length >= 1 && p1.length <= 2 && monthMap[p2] && p3.length === 2) {
                const year = parseInt(`20${p3}`, 10);
                const month = monthMap[p2];
                const day = String(p1).padStart(2, '0');
                return `${year}-${month}-${day}`;
            }
        }
        return null;
    };

    const generateCSV = (tasksToExport) => {
        const headers = ["WBS", "Task Name", "Original Duration (Days)", "Weightage (%)", "Planned Start Date", "Planned End Date", "Actual Start Date", "Actual End Date", "Progress (%)", "Status", "Is Critical", "Predecessors", "Weather Delay (Days)", "Contractor Delay (Days)", "Client Delay (Days)", "Is Client Deliverable", "Notes", "Client Communications Log"];
        const flattenedTasks = [];
        const flatten = (tasks) => {
            tasks.forEach(task => {
                flattenedTasks.push(task);
                if (task.subtasks && task.subtasks.length > 0) flatten(task.subtasks);
            });
        };
        flatten(tasksToExport);
        const rows = flattenedTasks.map(task => {
            const clientCommLog = (task.clientComments || []).map(cc => {
                let log = `${cc.adminName || 'Admin'} (${formatDateForDisplay(cc.adminTimestamp)}): ${cc.adminComment.replace(/"/g, '""')}`;
                if (cc.clientStatus) {
                    log += ` | Client (${formatDateForDisplay(cc.clientResponseTimestamp)}): ${cc.clientStatus}`;
                    if (cc.clientComment) log += ` - Comment: ${cc.clientComment.replace(/"/g, '""')}`;
                }
                return log;
            }).join(' || ');
            return [task.wbs || '', task.taskName || '', task.originalDurationDays || 0, task.weightage ?? 0, formatDateForExport(task.plannedStartDate), formatDateForExport(task.plannedEndDate), formatDateForExport(task.actualStartDate), formatDateForExport(task.actualEndDate), task.progress || 0, task.status || 'Not Started', task.isCritical ? 'Yes' : 'No', task.predecessorString || '', task.delayWeatherDays || 0, task.delayContractorDays || 0, task.delayClientDays || 0, task.isClientDeliverable ? 'Yes' : 'No', (task.notes || []).map(n => `${new Date(n.timestamp).toLocaleString()} [${n.source}]: ${n.text.replace(/"/g, '""')}`).join('; '), clientCommLog];
        });
        return [headers.join(','), ...rows.map(row => row.map(field => `"${String(field).replace(/"/g, '""')}"`).join(','))].join('\n');
    };

    const NotificationToast = ({ message, type = 'info', onDismiss, action, duration }) => {
        const { useState, useEffect } = React;
        const [show, setShow] = useState(false);
        useEffect(() => {
            setShow(true);
            const displayMs = typeof duration === 'number' ? duration : 5000;
            const timer = setTimeout(() => { setShow(false); setTimeout(onDismiss, 500); }, displayMs);
            return () => clearTimeout(timer);
        }, [message, onDismiss]);
        const typeClasses = { info: 'bg-blue-500', success: 'bg-green-500', error: 'bg-red-500' };
        const Icon = { info: InfoIcon, success: CheckCircle, error: AlertTriangle }[type];
        return React.createElement('div', { className: `notification-toast ${show ? 'show' : ''}` },
            React.createElement('div', { className: `flex items-center justify-between w-full text-white text-sm font-medium px-4 py-3 rounded-lg shadow-lg ${typeClasses[type]}` },
                React.createElement('div', { className: 'flex items-center' },
                    React.createElement(Icon, { size: 20, className: 'mr-2' }),
                    React.createElement('p', null, message)
                ),
                action && React.createElement('button', { onClick: action.onClick, className: 'ml-4 px-3 py-1 bg-white/20 hover:bg-white/30 rounded-md text-white text-xs font-semibold' }, action.label)
            )
        );
    };

    // Usage Stats Widget
    const UsageStatsWidget = ({ role }) => {
        const { useState, useEffect, useRef } = React;
        const [usage, setUsage] = useState(null);
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState('');
        const intervalRef = useRef(null);

        const fetchUsage = async () => {
            setLoading(true);
            setError('');
            try {
                const res = await makeAuthenticatedRequest('/api/org/usage', { method: 'GET' });
                const data = await res.json();
                if (data.status === 'success') {
                    setUsage(data);
                    window.latestUsageStats = data;
                } else {
                    setError(data.message || 'Failed to load usage');
                }
            } catch (e) {
                setError('Failed to load usage');
            } finally {
                setLoading(false);
            }
        };

        useEffect(() => {
            fetchUsage();
            window.refreshUsageStats = fetchUsage;
            intervalRef.current = setInterval(fetchUsage, 5 * 60 * 1000);
            const onExceeded = () => fetchUsage();
            window.addEventListener('planLimitExceeded', onExceeded);
            return () => {
                clearInterval(intervalRef.current);
                window.removeEventListener('planLimitExceeded', onExceeded);
            };
        }, []);

        const Progress = ({ label, value, limit, percent }) => {
            const pct = Math.max(0, Math.min(100, percent || (limit > 0 && limit < 999999 ? Math.round((value / limit) * 100) : 0)));
            return React.createElement('div', { className: 'mb-3' },
                React.createElement('div', { className: 'flex justify-between text-xs mb-1' },
                    React.createElement('span', null, label),
                    React.createElement('span', null, limit >= 999999 ? `${value} / ∞` : `${value} / ${limit} (${pct}%)`)
                ),
                React.createElement('div', { className: 'w-full h-2 bg-slate-700 rounded' },
                    React.createElement('div', { className: 'h-2 bg-sky-500 rounded', style: { width: `${pct}%` } })
                )
            );
        };

        if (loading) return React.createElement('div', { className: 'mt-6 text-xs text-slate-300' }, 'Loading usage...');
        if (error) return React.createElement('div', { className: 'mt-6 text-xs text-red-300' }, error);
        if (!usage) return null;

        const limits = usage.limits || {};
        const u = usage.usage || {};
        const pct = usage.percentage || {};

        return React.createElement('div', { className: 'mt-6 p-3 bg-slate-900/50 rounded-lg border border-slate-700' },
            React.createElement('div', { className: 'text-xs font-bold text-slate-200 mb-2' }, 'Organization Usage'),
            React.createElement(Progress, { label: 'Projects', value: u.projects || 0, limit: limits.projects ?? 0, percent: pct.projects }),
            React.createElement(Progress, { label: 'Team Members', value: u.users || 0, limit: limits.users ?? 0, percent: pct.users }),
            React.createElement(Progress, { label: 'AI Prompts (This Week)', value: u.ai_prompts_this_week || 0, limit: (limits.ai_prompts_per_week ?? 0), percent: pct.ai_prompts }),
            React.createElement('div', { className: 'mt-2 text-[10px] text-slate-400' }, (() => {
                const plan = usage.subscription?.plan;
                const status = usage.subscription?.status;
                const isTrial = status === 'trial' || usage.subscription?.is_trial;
                const displayNames = { 'basic': 'Basic Plan', 'si_plus': 'Plus Plan', 'plus': 'Plus Plan', 'pro': 'Pro Plan' };
                let displayText = plan ? (displayNames[plan] || plan) : '';
                if (isTrial && displayText) displayText += ' (Trial)';
                return displayText ? `Plan: ${displayText}` : '';
            })()),
            (role === 'super_admin' || role === 'org_admin') && React.createElement('button', { onClick: () => { if (window.openSubscriptionManagement) window.openSubscriptionManagement(); }, className: 'w-full mt-3 py-2 px-3 text-xs font-medium text-purple-300 bg-purple-900/30 rounded hover:bg-purple-900/40 transition-colors' }, 'Manage Subscription →')
        );
    };

    const OverallProgress = ({ tasks, selectedProject }) => {
        const { useState, useEffect, useMemo } = React;
        const [plannedProgress, setPlannedProgress] = useState(0);
        const [isLoading, setIsLoading] = useState(true);

        useEffect(() => {
            if (selectedProject) {
                setIsLoading(true);
                makeAuthenticatedRequest(`/api/overall_planned_progress?project=${encodeURIComponent(selectedProject)}`, { method: 'GET', headers: { 'Content-Type': 'application/json' } })
                    .then(res => res.json())
                    .then(data => {
                        setPlannedProgress(data.planned_progress || 0);
                    })
                    .catch(err => {
                        console.error("Failed to fetch planned progress:", err);
                        setPlannedProgress(0); // Set to 0 on error
                    })
                    .finally(() => {
                        setIsLoading(false);
                    });
            }
        }, [selectedProject, tasks]); // Re-fetch if project or tasks change

        const overallProgress = useMemo(() => {
            const mainProjectTask = tasks.find(t => t.wbs === '1');
            return mainProjectTask ? mainProjectTask.progress || 0 : 0;
        }, [tasks]);

        const flattenedTasks = useMemo(() => { const allTasks = []; const flatten = (tasksToFlatten) => { if (!tasksToFlatten) return; tasksToFlatten.forEach(task => { allTasks.push(task); flatten(task.subtasks); }); }; flatten(tasks); return allTasks; }, [tasks]);
        const totalWeatherDelay = useMemo(() => flattenedTasks.reduce((sum, task) => sum + (task.delayWeatherDays || 0), 0), [flattenedTasks]);
        const totalContractorDelay = useMemo(() => flattenedTasks.reduce((sum, task) => sum + (task.delayContractorDays || 0), 0), [flattenedTasks]);
        const totalClientDelay = useMemo(() => flattenedTasks.reduce((sum, task) => sum + (task.delayClientDays || 0), 0), [flattenedTasks]);

        return (React.createElement("div", { className: "mb-6 p-4 bg-white shadow rounded-lg overall-project-progress" },
            React.createElement("h3", { className: "text-lg font-semibold text-slate-700 mb-2" }, "Overall Project Progress"),
            React.createElement("div", { className: "w-full bg-slate-200 rounded-full h-4 relative" },
                React.createElement("div", { className: "bg-blue-300 h-4 rounded-full", style: { width: `${plannedProgress.toFixed(2)}%` }, title: `Planned Progress: ${plannedProgress.toFixed(2)}%` }),
                React.createElement("div", { className: "bg-blue-600 h-4 rounded-full absolute top-0", style: { width: `${overallProgress}%` }, title: `Actual Progress: ${overallProgress}%` })
            ),
            React.createElement("div", { className: "flex justify-between text-sm mt-2" },
                React.createElement("div", { className: "flex items-center" },
                    React.createElement("span", { className: "h-3 w-3 rounded-full bg-blue-600 mr-2" }),
                    React.createElement("span", null, `Actual: `, React.createElement("strong", null, `${overallProgress}%`))
                ),
                isLoading
                    ? React.createElement("div", { className: "text-xs text-slate-500" }, "Calculating Planned...")
                    : React.createElement("div", { className: "flex items-center" },
                        React.createElement("span", { className: "h-3 w-3 rounded-full bg-blue-300 mr-2" }),
                        React.createElement("span", null, `Planned: `, React.createElement("strong", null, `${plannedProgress.toFixed(2)}%`))
                    )
            ),
            (totalWeatherDelay > 0 || totalContractorDelay > 0 || totalClientDelay > 0) && React.createElement("div", { className: "text-xs text-slate-500 mt-3 border-t pt-2 flex flex-col sm:flex-row flex-wrap justify-between gap-x-4" },
                totalWeatherDelay > 0 && React.createElement("span", null, "Weather Delay: ", totalWeatherDelay, " days"),
                totalContractorDelay > 0 && React.createElement("span", null, "Contractor Delay: ", totalContractorDelay, " days"),
                totalClientDelay > 0 && React.createElement("span", null, "Client Delay: ", totalClientDelay, " days")
            )
        ));
    };
</script>