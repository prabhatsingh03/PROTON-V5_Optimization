{% raw %}
<script type="text/babel">
  const ProjectCard = ({ project, onView, onReport, onGantt, viewMode }) => {
    if (!project) return null;

    const name = project.name || 'Untitled Project';
    const code = project.client_access_code || 'N/A';
    const createdAt = project.created_at || project.createdAt || null;

    let createdLabel = 'Created date not available';
    try {
      if (createdAt) {
        const dt = new Date(createdAt);
        if (!isNaN(dt.getTime())) {
          createdLabel = dt.toLocaleDateString(undefined, {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
          });
        }
      }
    } catch (e) { }

    const progress = project.overall_actual_progress !== undefined ? Math.round(project.overall_actual_progress) : 0;
    const status = 'Active';

    return (
      <div className={`project-card ${viewMode === 'list' ? 'project-card-list' : ''}`}>
        <div className="project-card-header">
          <div className="flex items-center justify-between">
            <div className="project-name">{name}</div>
            <span className="status-badge in-progress">{status}</span>
          </div>
          <div className="mt-1 project-code">
            Access Code: <span className="font-semibold">{code}</span>
          </div>
        </div>

        <div className="project-card-body">
          <div className="project-date flex items-center gap-2">
            <span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                className="h-4 w-4 text-slate-400"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
              >
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
              </svg>
            </span>
            <span>Created on {createdLabel}</span>
          </div>

          <div className="project-progress-container">
            <div className="project-progress-label">
              <span>Actual Project Progress</span>
              <span>{progress}%</span>
            </div>
            <div className="project-progress-bar">
              <div
                className="project-progress-fill"
                style={{ width: `${progress}%` }}
              />
            </div>
          </div>
        </div>

        <div className="project-card-footer">
          <button
            type="button"
            className="project-action-btn project-action-btn-view"
            onClick={() => onView(project)}
          >
            View
          </button>
          <button
            type="button"
            className="project-action-btn project-action-btn-report"
            onClick={() => onReport(project)}
          >
            Reports
          </button>
          <button
            type="button"
            className="project-action-btn project-action-btn-gantt"
            onClick={() => onGantt(project)}
          >
            Gantt
          </button>
        </div>
      </div>
    );
  };
</script>
{% endraw %}